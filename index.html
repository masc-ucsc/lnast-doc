


  

  

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>LNAST</title>

    <style>
    </style>
    <link rel="stylesheet" media="screen" href="pub/css/screen.css">
    <link rel="stylesheet" media="print" href="pub/css/print.css">
    <link rel="stylesheet" media="screen" href="pub/css/darkula.css">
    
      <script src="source/javascripts/lib/_jquery.js"></script>
<script src="source/javascripts/lib/_jquery.highlight.js"></script>
<script src="source/javascripts/lib/_lunr.js"></script>
<script src="source/javascripts/lib/_imagesloaded.min.js"></script>
<script src="source/javascripts/lib/_energize.js"></script>
<script src="source/javascripts/app/_lang.js"></script>
<script src="source/javascripts/app/_search.js"></script>
<script src="source/javascripts/app/_toc.js"></script>
<script type="text/javascript">
$(function() {
  loadToc($('#toc'), '.toc-link', '.toc-list-h2, .toc-list-h3, .toc-list-h4, .toc-list-h5, .toc-list-h6', 10);
  setupLanguages($('body').data('languages'));
  $('.content').imagesLoaded( function() {
    recacheHeights();
    refreshToc();
  });
});

window.onpopstate = function() {
  activateLanguage(getLanguageFromQueryString());
};
</script>

    
    <meta name="theme-color" content="#F3F7F9" />
<!-- Renderer: Shins v2.4.1-0 -->
  </head>

  <body data-languages="[&quot;coffescript&quot;,&quot;verilog&quot;,&quot;shell&quot;,&quot;cpp&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="source/images/navbar.png" class="undefined" alt="Navigation">
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="source/images/logo.png" class="logo" alt="Logo">
      
        <div class="lang-selector">
          
            
              <a href="#" data-language-name="coffescript">pyrope</a>
            
          
            
              <a href="#" data-language-name="verilog">verilog</a>
            
          
            
              <a href="#" data-language-name="shell">cfg</a>
            
          
            
              <a href="#" data-language-name="cpp">cpp</a>
            
          
        </div>
      
      
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      
      <div id="toc" class="toc-list-h1">
	  	<ul class="toc-list-h1">
        
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
            
              <ul class="toc-list-h2">
                
                  <li>
                    <a href="#function-overloadings-of-node-data-construction" class="toc-h2 toc-link" data-title="">Function Overloadings of Node Data Construction</a>
                    
                  </li>
                
                  <li>
                    <a href="#another-example" class="toc-h2 toc-link" data-title="">Another Example</a>
                    
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="#module-input--output--and-register-declaration" class="toc-h1 toc-link" data-title="Module Input, Output, and Register Declaration">Module Input, Output, and Register Declaration</a>
            
              <ul class="toc-list-h2">
                
                  <li>
                    <a href="#input" class="toc-h2 toc-link" data-title="">Input</a>
                    
                  </li>
                
                  <li>
                    <a href="#output" class="toc-h2 toc-link" data-title="">Output</a>
                    
                  </li>
                
                  <li>
                    <a href="#register" class="toc-h2 toc-link" data-title="">Register</a>
                    
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="#assign-statement" class="toc-h1 toc-link" data-title="Assign Statement">Assign Statement</a>
            
              <ul class="toc-list-h2">
                
                  <li>
                    <a href="#assign-trivial-constant" class="toc-h2 toc-link" data-title="">Assign Trivial Constant</a>
                    
                  </li>
                
                  <li>
                    <a href="#assign-simple-expression" class="toc-h2 toc-link" data-title="">Assign Simple Expression</a>
                    
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="#----unary-operation-statement" class="toc-h1 toc-link" data-title="!!! Unary Operation Statement">!!! Unary Operation Statement</a>
            
              <ul class="toc-list-h2">
                
                  <li>
                    <a href="#----not-operation" class="toc-h2 toc-link" data-title="">!!! Not Operation</a>
                    
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="#n-ary-operation-statement" class="toc-h1 toc-link" data-title="N-ary Operation Statement">N-ary Operation Statement</a>
            
              <ul class="toc-list-h2">
                
                  <li>
                    <a href="#and-operation" class="toc-h2 toc-link" data-title="">And Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#or-operation" class="toc-h2 toc-link" data-title="">Or Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#xor-operation" class="toc-h2 toc-link" data-title="">Xor Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#logical-and-operation" class="toc-h2 toc-link" data-title="">Logical And Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#logical-or-operation" class="toc-h2 toc-link" data-title="">Logical Or Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#plus-operation" class="toc-h2 toc-link" data-title="">Plus Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#minus-operation" class="toc-h2 toc-link" data-title="">Minus Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#multiply-operation" class="toc-h2 toc-link" data-title="">Multiply Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#division-operation" class="toc-h2 toc-link" data-title="">Division Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#equals-to-operation" class="toc-h2 toc-link" data-title="">Equals to Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#less-than-operation" class="toc-h2 toc-link" data-title="">Less than Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#less-than-or-equals-to-operation" class="toc-h2 toc-link" data-title="">Less than or Equals to Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#greater-than-operation" class="toc-h2 toc-link" data-title="">Greater than Operation</a>
                    
                  </li>
                
                  <li>
                    <a href="#greater-than-or-equals-to-operation" class="toc-h2 toc-link" data-title="">Greater than or Equals to Operation</a>
                    
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="#if-statement" class="toc-h1 toc-link" data-title="If Statement">If Statement</a>
            
              <ul class="toc-list-h2">
                
                  <li>
                    <a href="#simple-case" class="toc-h2 toc-link" data-title="">Simple Case</a>
                    
                  </li>
                
                  <li>
                    <a href="#full-case" class="toc-h2 toc-link" data-title="">Full Case</a>
                    
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="#---tuple-statement" class="toc-h1 toc-link" data-title="!!!Tuple Statement">!!!Tuple Statement</a>
            
          </li>
        
          <li>
            <a href="#---tuple-concatenation-statement" class="toc-h1 toc-link" data-title="!!!Tuple Concatenation Statement">!!!Tuple Concatenation Statement</a>
            
          </li>
        
          <li>
            <a href="#---for-loop-statement" class="toc-h1 toc-link" data-title="!!!For Loop Statement">!!!For Loop Statement</a>
            
          </li>
        
          <li>
            <a href="#---while-loop-statement" class="toc-h1 toc-link" data-title="!!!While Loop Statement">!!!While Loop Statement</a>
            
          </li>
        
          <li>
            <a href="#---function-definition-statement" class="toc-h1 toc-link" data-title="!!!Function Definition Statement">!!!Function Definition Statement</a>
            
          </li>
        
          <li>
            <a href="#---function-call" class="toc-h1 toc-link" data-title="!!!Function Call">!!!Function Call</a>
            
          </li>
        
          <li>
            <a href="#---attribute" class="toc-h1 toc-link" data-title="!!!Attribute">!!!Attribute</a>
            
          </li>
        
          <li>
            <a href="#---statements--code-block-for-same-scopes-" class="toc-h1 toc-link" data-title="!!!Statements (code block for same scopes)">!!!Statements (code block for same scopes)</a>
            
          </li>
        
          <li>
            <a href="#---assertion" class="toc-h1 toc-link" data-title="!!!Assertion">!!!Assertion</a>
            
          </li>
        
          <li>
            <a href="#examples" class="toc-h1 toc-link" data-title="Examples">Examples</a>
            
              <ul class="toc-list-h2">
                
                  <li>
                    <a href="#trivial-counter" class="toc-h2 toc-link" data-title="">trivial counter</a>
                    
                  </li>
                
              </ul>
            
          </li>
        
		</ul>
      </div>
      
        <ul class="toc-footer">
          
            <li><a href="https://github.com/masc-ucsc/livehd">LiveHD on Github</a></li>
          
        </ul>
      
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <!-- Renderer: Shins v2.4.1-0 --><h1 id="introduction">Introduction</h1>
<p>LNAST stands for Language-Neutral Abstract Syntax Tree, which is constituted of<br>
Lnast_nodes and indexed by a tree structure.</p>
<p>Each Lnast_node should has a specific node type and contain the following information from source code tokens<br>
(a) line number<br>
(b) pos_start, pos_end<br>
(c) string_view (optional)</p>
<h2 id="function-overloadings-of-node-data-construction">Function Overloadings of Node Data Construction</h2>
<p>Every node construction method has four function overloadings.<br>
For example, to construct a Lnast_node with a type of reference,<br>
we could use one of the following functions:</p>
<pre class="highlight tab tab-cpp"><code><span class="hljs-comment">// C++</span>
<span class="hljs-keyword">auto</span> node_ref = Lnast_node::create_ref(<span class="hljs-string">"foo"</span>);     
<span class="hljs-keyword">auto</span> node_ref = Lnast_node::create_ref(<span class="hljs-string">"foo"</span>, line_num);     
<span class="hljs-keyword">auto</span> node_ref = Lnast_node::create_ref(<span class="hljs-string">"foo"</span>, line_num, pos1, pos2);     
<span class="hljs-keyword">auto</span> node_ref = Lnast_node::create_ref(token);   
</code></pre>
<p>In case (1), you only knows the variable name is &quot;foo&quot;.<br>
In case (2), you know the variable name and the corresponding line number.<br>
In case (3), you know the variable name, the line number, and the charactrer position.<br>
In case (4), you are building LNAST from your HDL AST and you already have the Token.<br>
The toke should have line number, positions, and string_view information.</p>
<h2 id="another-example">Another Example</h2>
<p>If you don't care the string_view to be stored in the lnast node, just leave it empty for set &quot;foo&quot; for it.
This is true for many of the operator node, for example, to build a node with type of assign.</p>
<pre class="highlight tab tab-cpp"><code><span class="hljs-comment">// C++</span>
<span class="hljs-keyword">auto</span> node_assign = Lnast_node::create_assign();   
<span class="hljs-keyword">auto</span> node_assign = Lnast_node::create_assign(line_num);     
<span class="hljs-keyword">auto</span> node_assign = Lnast_node::create_assign(line_num, pos1, pos2);   
<span class="hljs-keyword">auto</span> node_assign = Lnast_node::create_assign(token); <span class="hljs-comment">// The token is not necessary to have a string_view  </span>
</code></pre>
<h1 id="module-input--output--and-register-declaration">Module Input, Output, and Register Declaration</h1>
<p>In LNAST, all input/output/register are defined in the node type reference
with differenct prefix of string_view, &quot;$&quot; stands for input, &quot;%&quot; stands for
output, and &quot;#&quot; stands for register.</p>
<h2 id="input">Input</h2>
<pre class="highlight"><code>// Pyrope
foo = $a
</code></pre>
<pre class="highlight tab tab-verilog"><code><span class="hljs-comment">// Verilog</span>
<span class="hljs-keyword">input</span> a;
</code></pre>
<pre class="highlight tab tab-cpp"><code><span class="hljs-comment">// C++</span>
<span class="hljs-keyword">auto</span> node_input = Lnast_node::create_ref(<span class="hljs-string">"$a"</span>, line_num, pos1, pos2);
</code></pre>
<h2 id="output">Output</h2>
<pre class="highlight"><code>// Pyrope
%out
</code></pre>
<pre class="highlight tab tab-verilog"><code><span class="hljs-comment">// Verilog</span>
<span class="hljs-keyword">output</span> out;
</code></pre>
<pre class="highlight tab tab-cpp"><code><span class="hljs-comment">// C++</span>
<span class="hljs-keyword">auto</span> node_output = Lnast_node::create_ref(<span class="hljs-string">"%out"</span>, line_num, pos1, pos2);
</code></pre>
<h2 id="register">Register</h2>
<pre class="highlight"><code>// Pyrope
#reg_foo
</code></pre>
<pre class="highlight tab tab-verilog"><code><span class="hljs-comment">// Verilog</span>
<span class="hljs-keyword">reg</span> reg_foo;
</code></pre>
<pre class="highlight tab tab-cpp"><code><span class="hljs-comment">// C++</span>
<span class="hljs-keyword">auto</span> node_reg = Lnast_node::create_ref(<span class="hljs-string">"#reg_foo"</span>, line_num, pos1, pos2);
</code></pre>
<h1 id="assign-statement">Assign Statement</h1>
<h2 id="assign-trivial-constant">Assign Trivial Constant</h2>
<pre class="highlight"><code>// Pyrope
val = 1023u10bits
</code></pre>
<pre class="highlight tab tab-verilog"><code><span class="hljs-comment">// Verilog</span>
<span class="hljs-keyword">assign</span> val = <span class="hljs-number">10</span><span class="hljs-meta">`d1023</span>
</code></pre>
<pre class="highlight tab tab-shell"><code>// CFG
1       0       0       SEQ0
2       1       0       0       10      =       val     0d1023u10
</code></pre>
<pre class="highlight tab tab-cpp"><code><span class="hljs-comment">// C++</span>
<span class="hljs-keyword">auto</span> node_stmts  = Lnast_node::create_stmts  (<span class="hljs-string">"foo"</span>, line_num, pos1, pos2); 
<span class="hljs-keyword">auto</span> node_assign = Lnast_node::create_assign (<span class="hljs-string">"foo"</span>, line_num, pos1, pos2); 
<span class="hljs-keyword">auto</span> node_target = Lnast_node::create_ref    (<span class="hljs-string">"val"</span>, line_num, pos1, pos2);
<span class="hljs-keyword">auto</span> node_const  = Lnast_node::create_const  (<span class="hljs-string">"0d1023u10"</span>, line_num, pos1, pos2);

<span class="hljs-keyword">auto</span> idx_stmts  = lnast-&gt;add_child(idx_root,   node_stmts);
<span class="hljs-keyword">auto</span> idx_assign = lnast-&gt;add_child(idx_stmts,  node_assign);
<span class="hljs-keyword">auto</span> idx_target = lnast-&gt;add_child(idx_assign, node_target);
<span class="hljs-keyword">auto</span> idx_const  = lnast-&gt;add_child(idx_assign, node_const);
</code></pre>
<p><img src="source/graphviz/assign_trivial_constant.png" alt="assign">
An assign node sets the right hand side value to the reference pointed by the left hand side<br>
of the expression. The left hand side is always a reference. The right hand side is a reference or a constant.</p>
<h2 id="assign-simple-expression">Assign Simple Expression</h2>
<pre class="highlight"><code>// Pyrope
total = (x - 1) + 3 + 2
</code></pre>
<pre class="highlight tab tab-verilog"><code><span class="hljs-comment">// Verilog</span>
<span class="hljs-keyword">assign</span> total = (x - <span class="hljs-number">1</span>) + <span class="hljs-number">3</span> + <span class="hljs-number">2</span>
</code></pre>
<pre class="highlight tab tab-shell"><code>// CFG
1       0       0       SEQ0
2       1       0       0       21      -       ___a    x       0d1
3       1       1       0       21      +       ___b    ___a    0d3    0d2
4       1       3       0       21      =       total   ___b

</code></pre>
<pre class="highlight tab tab-cpp"><code><span class="hljs-comment">// C++</span>

<span class="hljs-comment">// preparing lnast_node data</span>
<span class="hljs-comment">// Note: as mentioned in the introduction, if you have the HDL-AST in hand, using</span>
<span class="hljs-comment">// Token directly instead of explicit string, line_num, pos ... etc.</span>

<span class="hljs-keyword">auto</span> node_stmts  = Lnast_node::create_stmts  (<span class="hljs-string">"foo"</span>,  line_num, pos1, pos2); 
node node_minus  = Lnast_node::create_minus  (<span class="hljs-string">"foo"</span>,  line_num, pos1, pos2);
node node_lhs1   = Lnast_node::create_ref    (<span class="hljs-string">"___a"</span>, line_num, pos1, pos2);
node node_op1    = Lnast_node::create_ref    (<span class="hljs-string">"x"</span>,    line_num, pos1, pos2);
node node_op2    = Lnast_node::create_const  (<span class="hljs-string">"0d1"</span>,  line_num, pos1, pos2);

node node_plus   = Lnast_node::create_plis   (<span class="hljs-string">"bar"</span>,  line_num, pos1, pos2);
node node_lhs2   = Lnast_node::create_ref    (<span class="hljs-string">"___b"</span>, line_num, pos1, pos2);
node node_op3    = Lnast_node::create_ref    (<span class="hljs-string">"___a"</span>, line_num, pos1, pos2);
node node_op4    = Lnast_node::create_const  (<span class="hljs-string">"0d3"</span>,  line_num, pos1, pos2);
node node_op5    = Lnast_node::create_const  (<span class="hljs-string">"0d2"</span>,  line_num, pos1, pos2);

<span class="hljs-keyword">auto</span> node_assign = Lnast_node::create_assign (<span class="hljs-string">"foo2"</span>,  line_num, pos1, pos2); 
<span class="hljs-keyword">auto</span> node_lhs3   = Lnast_node::create_ref    (<span class="hljs-string">"total"</span>, line_num, pos1, pos2);
<span class="hljs-keyword">auto</span> node_op6    = Lnast_node::create_ref    (<span class="hljs-string">"___b"</span>,  line_num, pos1, pos2);

<span class="hljs-comment">// construct the LNAST tree </span>
<span class="hljs-keyword">auto</span> idx_stmts   = lnast-&gt;add_child(idx_root,  node_stmts);
<span class="hljs-keyword">auto</span> idx_minus   = lnast-&gt;add_child(idx_stmts, node_minus);
<span class="hljs-keyword">auto</span> idx_lhs1    = lnast-&gt;add_child(idx_minus, node_lhs1);
<span class="hljs-keyword">auto</span> idx_op1     = lnast-&gt;add_child(idx_minus, node_op1);        
<span class="hljs-keyword">auto</span> idx_op2     = lnast-&gt;add_child(idx_minus, node_op2);        

<span class="hljs-keyword">auto</span> idx_plus    = lnast-&gt;add_child(idx_stmts, node_plus);
<span class="hljs-keyword">auto</span> idx_lhs2    = lnast-&gt;add_child(idx_plus,  node_lhs2);
<span class="hljs-keyword">auto</span> idx_op3     = lnast-&gt;add_child(idx_plus,  node_op3);        
<span class="hljs-keyword">auto</span> idx_op4     = lnast-&gt;add_child(idx_plus,  node_op4);        
<span class="hljs-keyword">auto</span> idx_op5     = lnast-&gt;add_child(idx_plus,  node_op5);        

<span class="hljs-keyword">auto</span> idx_assign  = lnast-&gt;add_child(idx_stmts,  node_assign);
<span class="hljs-keyword">auto</span> idx_lhs3    = lnast-&gt;add_child(idx_assign, node_lhs3);
<span class="hljs-keyword">auto</span> idx_op6     = lnast-&gt;add_child(idx_assign, node_op6);        
</code></pre>
<p><img src="source/graphviz/assign_simple_expression.png" alt="assign">
statements that have operations must breakdown the operations per type, and then assign the temporal value to the assign node.</p>
<h1 id="----unary-operation-statement">!!! Unary Operation Statement</h1>
<h2 id="----not-operation">!!! Not Operation</h2>
<h1 id="n-ary-operation-statement">N-ary Operation Statement</h1>
<p>N-ary operation computes n rhs operands and assign the result to the lhs.</p>
<h2 id="and-operation">And Operation</h2>
<pre class="highlight"><code>// Pyrope
out = a &amp; b &amp; c
</code></pre>
<pre class="highlight tab tab-verilog"><code><span class="hljs-comment">// Verilog</span>
<span class="hljs-keyword">assign</span> out = a &amp; b &amp; c
</code></pre>
<pre class="highlight tab tab-shell"><code>// CFG
1       0       0       SEQ0
2       1       0       0       21      &amp;       ___a    a       b      c
3       1       3       0       21      =       out     ___a

</code></pre>
<pre class="highlight tab tab-cpp"><code><span class="hljs-comment">// C++</span>
<span class="hljs-keyword">auto</span> idx_stmts  = lnast-&gt;add_child(idx_root,  Lnast_node::create_stmts(token0));
<span class="hljs-keyword">auto</span> idx_and    = lnast-&gt;add_child(idx_stmts, Lnast_node::create_and  (token1)); <span class="hljs-comment">// string_view = ___a</span>
<span class="hljs-keyword">auto</span> idx_lhs1   = lnast-&gt;add_child(idx_and,   Lnast_node::create_ref  (token2)); <span class="hljs-comment">// string_view = a</span>
<span class="hljs-keyword">auto</span> idx_op1    = lnast-&gt;add_child(idx_and,   Lnast_node::create_ref  (token3)); <span class="hljs-comment">// string_view = b       </span>
<span class="hljs-keyword">auto</span> idx_op2    = lnast-&gt;add_child(idx_and,   Lnast_node::create_ref  (token4)); <span class="hljs-comment">// string_view = c       </span>

<span class="hljs-keyword">auto</span> idx_assign = lnast-&gt;add_child(idx_stmts,  Lnast_node::create_assign(token5));
<span class="hljs-keyword">auto</span> idx_lhs2   = lnast-&gt;add_child(idx_assign, Lnast_node::create_ref   (token6)); <span class="hljs-comment">// string_view = out</span>
<span class="hljs-keyword">auto</span> idx_op3    = lnast-&gt;add_child(idx_assign, Lnast_node::create_ref   (token7)); <span class="hljs-comment">// string_view = ___a       </span>
</code></pre>
<p><img src="source/graphviz/and.png" alt="assign"></p>
<h2 id="or-operation">Or Operation</h2>
<h2 id="xor-operation">Xor Operation</h2>
<h2 id="logical-and-operation">Logical And Operation</h2>
<h2 id="logical-or-operation">Logical Or Operation</h2>
<h2 id="plus-operation">Plus Operation</h2>
<h2 id="minus-operation">Minus Operation</h2>
<h2 id="multiply-operation">Multiply Operation</h2>
<h2 id="division-operation">Division Operation</h2>
<h2 id="equals-to-operation">Equals to Operation</h2>
<h2 id="less-than-operation">Less than Operation</h2>
<h2 id="less-than-or-equals-to-operation">Less than or Equals to Operation</h2>
<h2 id="greater-than-operation">Greater than Operation</h2>
<h2 id="greater-than-or-equals-to-operation">Greater than or Equals to Operation</h2>
<h1 id="if-statement">If Statement</h1>
<h2 id="simple-case">Simple Case</h2>
<pre class="highlight"><code>if a &gt; 3 {
  b = a + 1
} 
</code></pre>
<pre class="highlight tab tab-shell"><code>// CFG
1  0  0  SEQ0                      
2  1  0  0     24  <span class="hljs-keyword">if</span>  ___a        
3  2  0  SEQ1                      
4  3  0  0     24  &gt;   ___a  a     0d3
6  2  0  SEQ2                      
7  6  0  0     24  +   ___b  a     0d1
8  6  1  0     24  =   a     ___b  
</code></pre>
<pre class="highlight tab tab-verilog"><code><span class="hljs-keyword">assign</span> b = (a &gt; <span class="hljs-number">3</span>) ? a - <span class="hljs-number">1</span> : b; <span class="hljs-comment">//<span class="hljs-doctag">FIXME:</span> SH: incomplete cases? combinational loop!?</span>
</code></pre>
<pre class="highlight tab tab-cpp"><code><span class="hljs-comment">//C++ </span>

<span class="hljs-keyword">auto</span> idx_stmts0 = lnast-&gt;add_child(idx_root,   Lnast_node::create_stmts (token_0)); 
<span class="hljs-keyword">auto</span> idx_if     = lnast-&gt;add_child(idx_stmts0, Lnast_node::create_if    (token_1)); 

<span class="hljs-keyword">auto</span> idx_cstmts = lnast-&gt;add_child(idx_if,     Lnast_node::create_cstmts(token_2)); 
<span class="hljs-keyword">auto</span> idx_gt     = lnast-&gt;add_child(idx_cstmts, Lnast_node::create_gt    (token_3)); 
<span class="hljs-keyword">auto</span> idx_lhs    = lnast-&gt;add_child(idx_gt,     Lnast_node::create_ref   (token_4)); <span class="hljs-comment">//string_view = "___a"</span>
<span class="hljs-keyword">auto</span> idx_op1    = lnast-&gt;add_child(idx_gt,     Lnast_node::create_ref   (token_5)); <span class="hljs-comment">//string_view = "a"</span>
<span class="hljs-keyword">auto</span> idx_op2    = lnast-&gt;add_child(idx_gt,     Lnast_node::create_const (token_6)); <span class="hljs-comment">//string_view = "0d3"</span>

<span class="hljs-keyword">auto</span> idx_cond1  = lnast-&gt;add_child(idx_if,     Lnast_node::create_cond  (token_7)); <span class="hljs-comment">//string_view = "___a"</span>

<span class="hljs-keyword">auto</span> idx_stmts1 = lnast-&gt;add_child(idx_if,     Lnast_node::create_stmts (token_8));
<span class="hljs-keyword">auto</span> idx_plus   = lnast-&gt;add_child(idx_stmts1, Lnast_node::create_plus  (token_9));
<span class="hljs-keyword">auto</span> idx_lhs    = lnast-&gt;add_child(idx_plus,   Lnast_node::create_ref   (token_a)); <span class="hljs-comment">//string_view = "___b"</span>
<span class="hljs-keyword">auto</span> idx_op3    = lnast-&gt;add_child(idx_plus,   Lnast_node::create_ref   (token_b)); <span class="hljs-comment">//string_view = "a"</span>
<span class="hljs-keyword">auto</span> idx_op4    = lnast-&gt;add_child(idx_plus,   Lnast_node::create_const (token_c)); <span class="hljs-comment">//string_view = "0d1"</span>

<span class="hljs-keyword">auto</span> idx_assign = lnast-&gt;add_child(idx_stmts1, Lnast_node::create_assign(token_d)); 
<span class="hljs-keyword">auto</span> idx_lhs    = lnast-&gt;add_child(idx_assign, Lnast_node::create_ref   (token_e)); <span class="hljs-comment">//string_view = "a"</span>
<span class="hljs-keyword">auto</span> idx_op5    = lnast-&gt;add_child(idx_assign, Lnast_node::create_ref   (token_f)); <span class="hljs-comment">//string_view = "___b"</span>

</code></pre>
<p><img src="source/graphviz/simple_if.png" alt="assign">
An if-subtree consisted of conditional-statements sub-trees, boolean condition nodes, and statements
sub-trees in the following order:</p>
<p>cstmts1 -&gt; condition1 -&gt; stmts1 -&gt; cstmts2 -&gt; condition2 -&gt; stmts2 ...-&gt; stmtsN,</p>
<p>If there is a final &quot;else&quot; chunk, it won't comes with a corresponding conditionial
statements sub-tree and conditional node, see the figure for the detail.</p>
<h2 id="full-case">Full Case</h2>
<pre class="highlight"><code>// Pyrope
if a &gt; 10 {
  b = 3 
} elif a &lt; 1 {
  b = 2
} else {
  b = 1
}
</code></pre>
<pre class="highlight tab tab-verilog"><code><span class="hljs-comment">// Verilog</span>

<span class="hljs-keyword">assign</span> b = (a &gt; <span class="hljs-number">10</span>) ? <span class="hljs-number">3</span> :
           (a &lt; <span class="hljs-number">1</span> ) ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span> ;

</code></pre>
<pre class="highlight tab tab-shell"><code>// CFG 
1   0   0  SEQ0                       
2   1   0  0     62  <span class="hljs-keyword">if</span>    ___a       
3   2   0  SEQ1                       
4   3   0  0     62  &gt;     ___a  a    0d10
6   2   0  SEQ2                       
7   6   0  0     62  =     b     0d3  
9   2   2  0     62  <span class="hljs-keyword">elif</span>  ___b       
10  2   0  SEQ3                       
11  10  0  0     62  &lt;     ___b  a    0d1
13  2   0  SEQ4                       
14  13  0  0     62  =     b     0d2  
16  2   0  SEQ5                       
17  16  0  0     62  =     b     0d1  
</code></pre>
<pre class="highlight tab tab-cpp"><code><span class="hljs-comment">//C++ </span>
<span class="hljs-keyword">auto</span> idx_stmts0  = lnast-&gt;add_child(idx_root,   Lnast_node::create_stmts (token_0));
<span class="hljs-keyword">auto</span> idx_if      = lnast-&gt;add_child(idx_stmts0, Lnast_node::create_if    (token_1));

<span class="hljs-keyword">auto</span> idx_cstmts1 = lnast-&gt;add_child(idx_if,     Lnast_node::create_cstmts(token_2));
<span class="hljs-keyword">auto</span> idx_gt      = lnast-&gt;add_child(idx_cstmts, Lnast_node::create_gt    (token_3)); 
<span class="hljs-keyword">auto</span> idx_lhs     = lnast-&gt;add_child(idx_gt,     LNast_node::create_ref   (token_4)); <span class="hljs-comment">//string_view = "___a"</span>
<span class="hljs-keyword">auto</span> idx_op1     = lnast-&gt;add_child(idx_gt,     LNast_node::create_ref   (token_5)); <span class="hljs-comment">//string_view = "a"</span>
<span class="hljs-keyword">auto</span> idx_op2     = lnast-&gt;add_child(idx_gt,     LNast_node::create_const (token_6)); <span class="hljs-comment">//string_view = "0d10"</span>

<span class="hljs-keyword">auto</span> idx_cond1   = lnast-&gt;add_child(idx_if,     Lnast_node::create_cond  (token_7)); <span class="hljs-comment">//string_view = "___a"</span>

<span class="hljs-keyword">auto</span> idx_stmts1  = lnast-&gt;add_child(idx_if,     Lnast_node::create_stmts (token_8));
<span class="hljs-keyword">auto</span> idx_assign  = lnast-&gt;add_child(idx_stmts1, Lnast_node::create_assign(token_9));
<span class="hljs-keyword">auto</span> idx_lhs     = lnast-&gt;add_child(idx_assign, LNast_node::create_ref   (token_a)); <span class="hljs-comment">//string_view = "b"</span>
<span class="hljs-keyword">auto</span> idx_op1     = lnast-&gt;add_child(idx_assign, LNast_node::create_const (token_b)); <span class="hljs-comment">//string_view = "0d3"</span>

<span class="hljs-keyword">auto</span> idx_cstmts2 = lnast-&gt;add_child(idx_if,     Lnast_node::create_cstmts(token_c));
<span class="hljs-keyword">auto</span> idx_lt      = lnast-&gt;add_child(idx_cstmts, Lnast_node::create_lt    (token_d)); 
<span class="hljs-keyword">auto</span> idx_lhs     = lnast-&gt;add_child(idx_lt,     LNast_node::create_ref   (token_e)); <span class="hljs-comment">//string_view = "___b"</span>
<span class="hljs-keyword">auto</span> idx_op1     = lnast-&gt;add_child(idx_lt,     LNast_node::create_ref   (token_f)); <span class="hljs-comment">//string_view = "a"</span>
<span class="hljs-keyword">auto</span> idx_op2     = lnast-&gt;add_child(idx_lt,     LNast_node::create_const (token_g)); <span class="hljs-comment">//string_view = "0d1"</span>

<span class="hljs-keyword">auto</span> idx_cond2   = lnast-&gt;add_child(idx_if,     Lnast_node::create_cond  (token_h)); <span class="hljs-comment">//string_view = "___b"</span>

<span class="hljs-keyword">auto</span> idx_stmts2  = lnast-&gt;add_child(idx_if,     Lnast_node::create_stmts (token_i));
<span class="hljs-keyword">auto</span> idx_assign  = lnast-&gt;add_child(idx_stmts2, Lnast_node::create_assign(token_j));
<span class="hljs-keyword">auto</span> idx_lhs     = lnast-&gt;add_child(idx_assign, LNast_node::create_ref   (token_k)); <span class="hljs-comment">//string_view = "b"</span>
<span class="hljs-keyword">auto</span> idx_op1     = lnast-&gt;add_child(idx_assign, LNast_node::create_const (token_l)); <span class="hljs-comment">//string_view = "0d2"</span>
    
<span class="hljs-keyword">auto</span> idx_stmts3  = lnast-&gt;add_child(idx_if,     Lnast_node::create_stmts (token_m));
<span class="hljs-keyword">auto</span> idx_assign  = lnast-&gt;add_child(idx_stmts3, Lnast_node::create_assign(token_n));
<span class="hljs-keyword">auto</span> idx_lhs     = lnast-&gt;add_child(idx_assign, LNast_node::create_ref   (token_o)); <span class="hljs-comment">//string_view = "b"</span>
<span class="hljs-keyword">auto</span> idx_op1     = lnast-&gt;add_child(idx_assign, LNast_node::create_const (token_p)); <span class="hljs-comment">//string_view = "0d3"</span>

</code></pre>
<p><img src="source/graphviz/full_case_if.png" alt="assign"></p>
<h1 id="---tuple-statement">!!!Tuple Statement</h1>
<h1 id="---tuple-concatenation-statement">!!!Tuple Concatenation Statement</h1>
<h1 id="---for-loop-statement">!!!For Loop Statement</h1>
<h1 id="---while-loop-statement">!!!While Loop Statement</h1>
<h1 id="---function-definition-statement">!!!Function Definition Statement</h1>
<pre class="highlight"><code>// Pyrope
func_xor = :($a, $b, %out):{
  %out = $a ^ $b
}

</code></pre>
<pre class="highlight tab tab-verilog"><code><span class="hljs-comment">// Verilog</span>
<span class="hljs-keyword">module</span> func_xor(
  <span class="hljs-keyword">input</span> a,
  <span class="hljs-keyword">input</span> b,
  outpout <span class="hljs-keyword">wire</span> out
);

  <span class="hljs-keyword">assign</span> out = a ^ b;

<span class="hljs-keyword">endmodule</span>

</code></pre>
<pre class="highlight tab tab-shell"><code>// CFG 
1  0  0  SEQ0                                    
2  1  0  0     47  ::{  ___a      <span class="hljs-variable">$a</span>  <span class="hljs-variable">$b</span>  %out
4  2  0  SEQ1                                    
5  4  0  0     47  ^    ___b      <span class="hljs-variable">$a</span>     <span class="hljs-variable">$b</span>      
6  4  1  0     47  =    %out      ___b           
7  1  1  0     47  =    func_xor  \___a          
</code></pre>
<pre class="highlight tab tab-cpp"><code><span class="hljs-comment">//C++ </span>
<span class="hljs-keyword">auto</span> idx_stmts0  = lnast-&gt;add_child(idx_root,   Lnast_node::create_stmts   (token_0));
<span class="hljs-keyword">auto</span> idx_func    = lnast-&gt;add_child(idx_stmts0, Lnast_node::create_func_def(token_1));

<span class="hljs-keyword">auto</span> idx_fname   = lnast-&gt;add_child(idx_func,   Lnast_node::create_ref     (token_2)); <span class="hljs-comment">//string_view = "func_xor"</span>
<span class="hljs-keyword">auto</span> idx_io1     = lnast-&gt;add_child(idx_func,   Lnast_node::create_ref     (token_3)); <span class="hljs-comment">//string_view = "$a"</span>
<span class="hljs-keyword">auto</span> idx_io2     = lnast-&gt;add_child(idx_func,   Lnast_node::create_ref     (token_4)); <span class="hljs-comment">//string_view = "$b"</span>
<span class="hljs-keyword">auto</span> idx_io3     = lnast-&gt;add_child(idx_func,   Lnast_node::create_ref     (token_5)); <span class="hljs-comment">//string_view = "$out"</span>
<span class="hljs-keyword">auto</span> idx_stmts1  = lnast-&gt;add_child(idx_func,   Lnast_node::create_stmts   (token_6));

<span class="hljs-keyword">auto</span> idx_xor     = lnast-&gt;add_child(idx_stmts1, Lnast_node::create_xor     (token_7)); 
<span class="hljs-keyword">auto</span> idx_lhs     = lnast-&gt;add_child(idx_xor,    LNast_node::create_ref     (token_8)); <span class="hljs-comment">//string_view = "___b"</span>
<span class="hljs-keyword">auto</span> idx_op1     = lnast-&gt;add_child(idx_xor,    LNast_node::create_ref     (token_9)); <span class="hljs-comment">//string_view = "$a"</span>
<span class="hljs-keyword">auto</span> idx_op2     = lnast-&gt;add_child(idx_xor,    LNast_node::create_ref     (token_a)); <span class="hljs-comment">//string_view = "$b"</span>

<span class="hljs-keyword">auto</span> idx_assign  = lnast-&gt;add_child(idx_stmts1, Lnast_node::create_assign  (token_b));
<span class="hljs-keyword">auto</span> idx_lhs     = lnast-&gt;add_child(idx_assign, LNast_node::create_ref     (token_c)); <span class="hljs-comment">//string_view = "%out"</span>
<span class="hljs-keyword">auto</span> idx_op1     = lnast-&gt;add_child(idx_assign, LNast_node::create_ref     (token_d)); <span class="hljs-comment">//string_view = "___b"</span>
</code></pre>
<h1 id="---function-call">!!!Function Call</h1>
<h1 id="---attribute">!!!Attribute</h1>
<h1 id="---statements--code-block-for-same-scopes-">!!!Statements (code block for same scopes)</h1>
<h1 id="---assertion">!!!Assertion</h1>
<!-- Renderer: Shins v2.4.1-0 --><h1 id="examples">Examples</h1>
<h2 id="trivial-counter">trivial counter</h2>
<p>TBD</p>
<!-- Renderer: Shins v2.4.1-0 -->
      </div>
      <div class="dark-box">
        
          <div class="lang-selector">
            
              
                <a href="#" data-language-name="coffescript">pyrope</a>
              
            
              
                <a href="#" data-language-name="verilog">verilog</a>
              
            
              
                <a href="#" data-language-name="shell">cfg</a>
              
            
              
                <a href="#" data-language-name="cpp">cpp</a>
              
            
          </div>
        
      </div>
    </div>
  </body>
</html>
